<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <title>Finished</title>
</head>

<body>

    <div class="container mt-5">
        <h1 class="brand mt-5 text-success">
            Contratulations, You Have completed the Puzzle
        </h1>
        <h1 class="brand mt-5 text-primary">
            Play Again
        </h1>
        <button class="btn btn-warning" onclick="playAgain()">Click Here</button>

    </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
    crossorigin="anonymous"></script>
<script>
    function playAgain() {
        let localtoken = localStorage.getItem("authToken");
        async function fetcher() {
            await fetch(`http://3.89.90.64:9669/user/level_update`, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    Accept: "application/json",
                },
                body: JSON.stringify({ new_level: 0, token: localtoken })
            })
                .then((res) => res.json())
                .then((data) => {
                    return data;
                });
            await fetch(`http://3.89.90.64:9669/user/reset`, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    Accept: "application/json",
                },
                body: JSON.stringify({ new_level: 0, token: localtoken })
            })
                .then((res) => res.json())
                .then((data) => {
                    return data;
                });
        }
        const request_response = fetcher();
        localStorage.setItem("curr_level", 0);
        window.location.href = "index.html";
    }
</script>

</html>